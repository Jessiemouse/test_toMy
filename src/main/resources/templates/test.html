<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<input type="text" id="name">
<br>
<input type="file" id="file">
<br>
<button>upload</button>
<br>
<img id="preview">
</body>
<script>
  const nameInput = document.querySelector('#name');
  const fileInput = document.querySelector('#file');
  const imgPreview = document.querySelector('#preview');

  document.querySelector('button').addEventListener('click', () => {
    const fr = new FileReader();
    fr.addEventListener('load', e => {
      fetch('test/t1', {
        method: "POST",
        headers:{
          'Content-Type':'application/json'
        },
        body: JSON.stringify({
          name: nameInput.value,
          avatar: new Int8Array(e.target.result)
        })
      });
    });
    fr.readAsArrayBuffer(fileInput.files[0]);
  });
</script>
</html>
